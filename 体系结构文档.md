## 	ERP系统软件体系结构文档

<table>
    <tr>
        <th width="150"><center>修改人员</center></th>
        <th width="150"><center>日期</center></th>
        <th><center>变更原因</center></th>
        <th width="150"><center>版本号</center></th>
    </tr>
    <tr>
        <td><center>卞文骐 樊珺</center></td>
        <td><center>2022/7/9</center></td>
        <td><center>创建ERP系统软件体系结构文档</center></td>
        <td><center>v0.1.0 正式版</center></td>
    </tr>
    <tr>
        <td><center>樊珺</center></td>
        <td><center>2022/7/9</center></td>
        <td><center>结合代码部分，修改完善接口视角、信息视角</center></td>
        <td><center>v0.1.1 正式版</center></td>
    </tr>
        <tr>
        <td><center>卞文骐</center></td>
        <td><center>2022/7/10</center></td>
        <td><center>添加期初建账的接口规范</center></td>
        <td><center>v0.1.2 正式版</center></td>
    </tr>
</table>



### 1. 引言

#### 1.1 编制目的

本报告详细说明了对ERP系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。
本报告面向开发人员，测试人员及最终用户而编写。

#### 1.2 词汇表

| 词汇名称 | 词汇含义               | 备注 |
| -------- | ---------------------- | ---- |
| ERP      | 面向企业流程管理的系统 | ——   |

#### 1.3 参考资料

<table>
    <tr>
        <th width="380">参考资料</th>
        <th>出版单位</th>
        <th width="200">作者</th>
        <th width="100">日期</th>
    </tr>
    <tr>
        <td>软件工程与计算（卷二）：软件开发的技术基础</td>
        <td>机械工业出版社</td>
        <td>骆斌、刘钦、丁玉二</td>
        <td>2012.12</td>
    </tr>
    <tr>
        <td>大作业项目需求</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>lab7-大作业final检查</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>用例文档</td>
        <td></td>
        <td>卞文骐、樊珺</td>
        <td>2022.7.3</td>
    </tr>
        <tr>
        <td>需求规格说明书</td>
        <td></td>
        <td>卞文骐、樊珺</td>
        <td>2022.7.3</td>
    </tr>
</table>

### 2.产品概述

该ERP系统由于公司规模扩大，为适应新的环境，提高工作效率和用户满意度而开发。主要包括库存管理、销售管理、财务管理、人事管理和企业经营管理等模块。
通过应用此产品，期望减少积压的库存，增加销售额，提高财务人员和人力资源人员工作效率，为经理的决策做支持。
该系统的主要用户有库存管理人员，进货销售人员，财务人员，人力资源人员，总经理等。


### 3.逻辑视角

ERP系统采用分层的体系风格结构，将系统分为4层（展示层，控制层，服务层，数据层），来表示高层抽象。展示层包含GUI页面实现，控制层将客户端所发送数据转发给服务层并返回结果给展示层，服务层负责业务逻辑处理，数据层负责数据持久化与访问。分层体系结构的逻辑视角和逻辑设计方案如图所示

<center><font size=2><b>包图表达逻辑视角</b></font></center>

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/包图表达逻辑视角201850003-seec-logo.png" style="zoom:67%;" />

<center><font size=2><b>体系结构逻辑设计方案</b></font></center>

![seec-logo](https://seec-homework.oss-cn-shanghai.aliyuncs.com/体系逻辑结构图201850003-seec-logo.png)

### 4.组合视角

#### 4.1 开发包图

ERP系统的最终开发包设计如表所示

<center><font size=2><b>ERP系统的最终开发包设计</b></font></center>

| 备注     | 物理包                    | 依赖的包                                                     |
| -------- | ------------------------- | ------------------------------------------------------------ |
|          | AccountController         | AccountService                                               |
| 账户     | AccountService            | AccountDao                                                   |
|          | AccountDao                | databaseutility                                              |
|          |                           |                                                              |
|          | ReceiptController         | ReceiptService                                               |
| 收款     | ReceiptService            | AccountService, CustomerService, ReceiptDao                  |
|          | ReceiptDao                | databaseutility                                              |
|          |                           |                                                              |
|          | PaymentController         | PaymentService                                               |
| 付款     | PaymentService            | AccountService, CustomerService, PaymentDao                  |
|          | PaymentDao                | databaseutility                                              |
|          |                           |                                                              |
|          | BusinessController        | BusinessService                                              |
| 经营查看 | BusinessService           | SaleService, SaleReturnsService, PurchaseService, PurchaseReturnsService, WarehouseService, ReceiptService, PaymentService, SalaryService, ProductService, CustomerService, AccountService |
|          |                           |                                                              |
|          | EmployeeController        | EmployeeService                                              |
| 员工     | EmployeeService           | UserService, EmployeeDao                                     |
|          | EmployeeDao               | databaseutility                                              |
|          |                           |                                                              |
|          | SalaryController          | SalaryService                                                |
| 薪资     | SalaryService             | EmployeeService, SalarySheetDao                              |
|          | SalarySheetDao            | databaseutility                                              |
|          |                           |                                                              |
|          | PromotionController       | PromotionService                                             |
| 促销策略 | PromotionService          | PromotionDao                                                 |
|          | PromotionDao              | databaseutility                                              |
|          |                           |                                                              |
|          | PurchaseController        | PurchaseService                                              |
| 进货     | PurchaseService           | WarehouseService, PromotionService, CustomerService, ProductService, PurchaseSheetDao, |
|          | PurchaseSheetDao          | databaseutility                                              |
|          |                           |                                                              |
|          | PurchaseReturnsController | PurchaseReturnService                                        |
| 进货退货 | PurchaseReturnsService    | WarehouseService, PromotionService, CustomerService, ProductService, PurchaseService, PurchaseReturnsSheetDao, |
|          | PurchaseReturnsSheetDao   | databaseutility                                              |
|          |                           |                                                              |
|          | SaleController            | SaleService                                                  |
| 销售     | SaleService               | WarehouseService, PromotionService, CustomerService, ProductService, SaleSheetDao, |
|          | SaleSheetDao              | databaseutility                                              |
|          |                           |                                                              |
|          | SaleReturnsController     | SaleReturnService                                            |
| 销售退货 | SaleReturnsService        | WarehouseService, PromotionService, CustomerService, ProductService, SaleService, SaleReturnsSheetDao, |
|          | SaleReturnsSheetDao       | databaseutility                                              |
|          |                           |                                                              |
|          | WarehouseController       | WarehouseService                                             |
| 库存     | WarehouseService          | ProductService, WarehouseInputSheetDao, WarehouseOutputSheetDao, WarehouseDao |
|          | WarehouseInputSheetDao    | databaseutility                                              |
|          | WarehouseOutputSheetDao   | databaseutility                                              |
|          | WarehouseDao              | databaseutility                                              |
|          |                           |                                                              |
|          | CustomerController        | CustomerService                                              |
| 客户     | CustomerService           | CustomerDao                                                  |
|          | CustomerDao               | databaseutility                                              |
|          |                           |                                                              |
|          | ProductController         | ProductService                                               |
| 产品     | ProductService            | CategoryService, ProductDao                                  |
|          | ProductDao                | databaseutility                                              |
|          |                           |                                                              |
|          | CategoryController        | CategoryService                                              |
| 产品分类 | CategoryService           | CategoryDao                                                  |
|          | CategoryDao               | databaseutility                                              |
|          |                           |                                                              |
|          | UserController            | UserService                                                  |
| 用户     | UserService               | UserDao                                                      |
|          | UserDao                   | databaseutility                                              |
|          |                           |                                                              |
| &emsp;   | CheckInController         | CheckInService                                               |
| &emsp;   | CheckInService            | CheckInDao,EmployeeService                                   |
| &emsp;   | CheckInDao                | databaseutility                                              |
|          |                           |                                                              |
|          | databaseutility           | JDBC                                                         |
|          | vo                        |                                                              |
|          | po                        |                                                              |
| 期初建账 |                           |                                                              |

ERP系统的开发包图如图所示

<center><font size=2><b>开发包图</b></font></center>

![开发包图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/开发包图201850003-seec-logo.png)

#### 4.2 运行时进程

在ERP系统中，会有多个客户端进程和一个服务器端进程，其进程图如图所示。结合部署图，客户端进程是在客户端机器上运行，服务器端进程在服务器端机器上运行。

<center><font size=2><b>进程图</b></font></center>

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/进程图201850003-seec-logo.png" alt="进程图" style="zoom:50%;" />

#### 4.3 物理部署

ERP系统中客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上。部署图如图所示。

<center><font size=2><b>图：部署图</b></font></center>

![部署图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/部署图201850003-seec-logo.png)

### 5.接口视角

#### 5.1 模块的职责

客户端模块和服务端模块视图如图所示

<center><font size=2><b>客户端模块视图</b></font></center>

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/客户端模块视图201850003-seec-logo.png" alt="客户端模块视图" style="zoom: 80%;" />

<center><font size=2><b>服务器端模块视图</b></font></center>

<img src="https://seec-homework.oss-cn-shanghai.aliyuncs.com/服务器端模块视角201850003-seec-logo.png" alt="服务器端模块视图" style="zoom:80%;" />

客户端各层和服务端各层职责

<center><font size=2><b>客户端各层的职责</b></font></center>

| 层       | 职责                              |
| :------- | --------------------------------- |
| 启动模块 | 负责初始化网络通信，启动用户页面  |
| 展示层   | Erp客户端界面                     |
| 网络模块 | 利用axios与后端通信，接收后端数据 |

<center><font size=2><b>服务端各层的职责</b></font></center>

| 层       | 职责                                                       |
| -------- | ---------------------------------------------------------- |
| 启动模块 | 负责初始化网络通信，启动用户页面                           |
| 网络模块 | 利用axios与前端通信，接收前端指令并返回响应                |
| 控制层   | 负责管理用户的操作，根据用户界面传过的请求，调用对应的服务 |
| 服务层   | 负责处理业务逻辑                                           |
| 数据层   | 负责数据持久化访问及提供数据访问接口                       |

#### 5.2 视图层的分解

根据需求，系统存在46个用户界面：

登录界面；

总经理主界面，进货管理，进货退货管理，销售管理，销售退货管理，客户管理，经营状况表，销售明细表，经营历程表，年终奖，促销策略；
（说明：这里总经理的管理页面用于审核单据、调整客户应付额度等）

人力资源人员主界面，员工管理，打卡记录；

财务人员主界面，账户管理，付款单，收款单，工资单，经营状况表，销售明细表，经营历程表，期初建账，打卡记录；

销售人员主界面，进货管理，进货退货管理，销售管理，销售退货管理，客户管理，打卡记录；

库存管理人员主界面，商品分类管理，商品管理，库存管理，库存查看，库存盘点，打卡记录；

界面跳转如图所示。

<center><font size=2><b>用户界面跳转图</b></font></center>

![用户界面跳转图](https://seec-homework.oss-cn-shanghai.aliyuncs.com/用户界面跳转图201850003-seec-logo.png)

##### 5.2.1 视图层设计原理

视图层中的各个界面利用 Vue、JavaScript、HTML、CSS实现


#### 5.3 业务逻辑层的分解

业务逻辑层包括多个针对界面的业务逻辑处理对象。例如：CustomerService负责客户管理界面的业务逻辑；EmployeeService对象负责员工管理界面的业务逻辑。业务逻辑层的设计如图所示。

<center><font size=2><b>业务逻辑层的设计</b></font></center>

![业务逻辑层的设计](https://seec-homework.oss-cn-shanghai.aliyuncs.com/业务逻辑层的设计201850003-seec-logo.png)

##### 5.3.1 业务逻辑层模块的职责

业务逻辑层模块的职责如表所示

| 模块                                                         | 职责                                               |
| ------------------------------------------------------------ | -------------------------------------------------- |
| UserService                                                  | 解决登录问题，识别登录错误                         |
| AccountService                                               | 解决账户增删改查问题                               |
| PaymentService                                               | 提供制定付款单服务                                 |
| ReceiptService                                               | 提供制定收款单服务                                 |
| SalaryService                                                | 提供制定工资单服务                                 |
| BusinessService                                              | 提供对销售明细表，经营情况表，经营历程表的查询服务 |
| EmployeeService                                              | 负责实现员工管理界面所需要的服务                   |
| ClockInService                                               | 负责实现打卡系统所需要的服务                       |
| SalaryComputeSrategy                                         | 负责实现制定薪酬规则所需要的服务                   |
| PromotionService、PromotionOfferStrategy、PromotionRequireStrategy | 负责实现制定促销策略所需要的服务                   |

##### 5.3.2 业务逻辑层模块的接口规范

该部分将重点描述账户管理、制定收款单、制定付款单、制定⼯资单、查看销售明细表、查看经营历程表、查看经营情况表 、期初建账 、员工管理、打卡系统、薪酬规则、制定促销策略、制定年终奖模块的业务逻辑层的接口规范

<center><font size=2><b>UserService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>UserService.login
<td>语法
<td>public Map<String, String> login(UserVO userVO)
</tr>
<tr>
<td>前置条件
<td>用户名和密码已输入
</tr>
<tr>
<td>后置条件
<td>判断用户名是否存在，密码是否正确，返回结果
</tr><tr>
<td rowspan=3>UserService.register
<td>语法
<td>public void register(UserVO userVO)
</tr>
<tr>
<td>前置条件
<td>用户信息已经输入
</tr>
<tr>
<td>后置条件
<td>尝试注册新用户
</tr><tr>
<td rowspan=3>UserService.auth
<td>语法
<td>public UserVO auth(String token)
</tr>
<tr>
<td>前置条件
<td>token被输入且符合规范
</tr>
<tr>
<td>后置条件
<td>验证token返回结果
</tr>
<tr>
<td rowspan=3>UserService.delete
<td>语法
<td>public void delete(Integer id)
</tr>
<tr>
<td>前置条件
<td>用户id存在
</tr>
<tr>
<td>后置条件
<td>调用userDao.deleteUserId删除用户
</tr>
<tr>
<th colspan=3>需要的服务（需接口）
</tr>
<tr>
<th>服务名
<th colspan=2>服务
</tr>
<tr>
<td>userDao.findByUsernameAndPassword(String name,String password)
<td colspan=2>通过用户名和密码获取用户
</tr>
<tr>
<td>userDao.findByUsername(String name)
<td colspan=2>通过用户名获取用户
</tr>
<tr>
<td>userDao.createUser(User userSave)
<td colspan=2>新建一个用户对象
</tr>
<tr>
<td>userDao.deleteUserById(Integer id)
<td colspan=2>删除一个用户对象
</tr>
</table>



<center><font size=2><b>AccountService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>AccountService.createAccount
<td>语法
<td>public void createAccount(AccountVO accountVO)
</tr>
<tr>
<td>前置条件
<td>账户信息已被输入
</tr>
<tr>
<td>后置条件
<td>尝试建立一个新账户
</tr>
<tr>
<td rowspan=3>AccountService.deleteById
<td>语法
<td>public void deleteById(Integer id)
</tr>
<tr>
<td>前置条件
<td>账户id存在
</tr>
<tr>
<td>后置条件
<td>删除一个账户
</tr>
<tr>
<td rowspan=3>AccountService.updateAccount
<td>语法
<td>public void updateAccount(AccountVO accountVO)
</tr>
<tr>
<td>前置条件
<td>新的账户被输入
</tr>
<tr>
<td>后置条件
<td>在数据库中更新账户信息
</tr>
<tr>
<td rowspan=3>AccountService.findByName
<td>语法
<td>public List<AccountVO> findByName(String name)
</tr>
<tr>
<td>前置条件
<td>账户关键词符合规范
</tr>
<tr>
<td>后置条件
<td>在数据库中查询符合关键词描述的账户返回
</tr>
<tr>
<td rowspan=3>AccountService.findByNameExactly
<td>语法
<td>public List<AccountVO> findByName(String name)
</tr>
<tr>
<td>前置条件
<td>账户名符合规范
</tr>
<tr>
<td>后置条件
<td>在数据库中查询该账户信息返回
</tr>
<tr>
<td rowspan=3>AccountService.queryAllAccount
<td>语法
<td>public List<AccountVO> queryAllAccount() 
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>获取所有账户形成列表返回
</tr>
<tr>
<td rowspan=3>AccountService.getSalaryPaymentAccount
<td>语法
<td>public AccountVO getSalaryPaymentAccount()
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>获取工资支付账户返回
</tr>
<tr>
<th colspan=3>需要的服务（需接口）
</tr>
<tr>
<th>服务名
<th colspan=2>服务
</tr>
<tr>
<td>accountDao.createAccount(AccountPO accountPO)
<td colspan=2>在数据库中新建一个账户持久化对象
</tr>
<tr>
<td>accountDao.deleteById(Integer id)
<td colspan=2>在数据库中删除一个账户
</tr>
<tr>
<td>accountDao.update(AccountPO accountPO)
<td colspan=2>在数据库中更新某个账户持久化信息
</tr>
<tr>
<td>accountDao.findByName(String name)
<td colspan=2>在数据库中查找符合关键词的账户
</tr>
<tr>
<td>accountDao.findByNameExactly(name)
<td colspan=2>在数据库中通过账户名查找账户
</tr>
<tr>
<td>accountDao.findAll()
<td colspan=2>在数据库中查找所有账户
</tr>
</table>



<center><font size=2><b>paymentService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>PaymentService.makeSheet
<td>语法
<td>public void makeSheet(UserVO userVO, PaymentSheetVO paymentSheetVO)
</tr>
<tr>
<td>前置条件
<td>用户已登录且填写付款单信息
</tr>
<tr>
<td>后置条件
<td>新建一个付款单对象，保存持久化实例
</tr>
<tr>
<td rowspan=3>PaymentService.approval
<td>语法
<td>public void approval(String paymentSheetId, PaymentSheetState state)
</tr>
<tr>
<td>前置条件
<td>付款单已被制定
</tr>
<tr>
<td>后置条件
<td>更改状态及银行账户，客户信息和银行账户余额
</tr>
<tr>
<td rowspan=3>PaymentService.getSheetByState
<td>语法
<td>public List<PaymentSheetVO> getSheetByState(PaymentSheetState state)
</tr>
<tr>
<td>前置条件
<td>状态已输入
</tr>
<tr>
<td>后置条件
<td>返回所有该状态的付款单列表
</tr>
<tr>
<td rowspan=3>PaymentService.getSheetById
<td>语法
<td>public PaymentSheetVO getSheetById(String paymentSheetId)
</tr>
<tr>
<td>前置条件
<td>id已输入
</tr>
<tr>
<td>后置条件
<td>返回该id的付款单
</tr>
<tr>
<th colspan=3>需要的服务（需接口）
</tr>
<tr>
<th>服务名
<th colspan=2>服务
</tr>
<tr>
<td>paymentDao.getLatest()
<td colspan=2>获取最近的付款单持久化对象
</tr>
<tr>
<td>paymentDao.saveSheet(PaymentSheetPO paymentSheetPO)
<td colspan=2>保存单一付款单持久化对象
</tr>
<tr>
<td>paymentDao.saveList(pContentPOList)
<td colspan=2>保存单一条目清单持久化对象
</tr>
<tr>
<td>paymentDao.findOneById(String paymentSheetId)
<td colspan=2>根据id找到对应的付款单持久化对象
</tr>
<tr>
<td>paymentDao.updateState(String paymentSheetId,PaymentSheetState state)
<td colspan=2>持久化更新该id对应付款单的状态数据
</tr>
<tr>
<td>customerService.findCustomerById(Integer supplier)
<td colspan=2>根据id查找对应客户的持久化对象
</tr>
<tr>
<td>customerService.updateCustomer(CustomerPO customerPO)
<td colspan=2>更新用户的持久化数据对象
</tr>
<tr>
<td>paymentDao.findContentBySheetId(paymentSheetId)
<td colspan=2>根据付款单id查找对应条目清单
</tr>
<tr>
<td>accountService.findByNameExactly(String name)
<td colspan=2>根据名字查找对应的账户
</tr>
<tr>
<td>accountService.updateAccount(AccountVO accountVO)
<td colspan=2>更新账户余额
</tr>
<tr>
<td>paymentDao.findAll()
<td colspan=2>获取所有付款单持久化对象
</tr>
<tr>
<td>paymentDao.findAllByState(PaymentSheetState state)
<td colspan=2>根据状态获取付款单持久化对象列表
</tr>
</table>



<center><font size=2><b>ReceiptService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>ReceiptService.makeSheet
<td>语法
<td>public void makeSheet(UserVO userVO, ReceiptSheetVO receiptSheetVO)
</tr>
<tr>
<td>前置条件
<td>用户已登录且填写收款单信息
</tr>
<tr>
<td>后置条件
<td>新建一个收款单对象，保存持久化实例
</tr>
<tr>
<td rowspan=3>ReceiptService.approval
<td>语法
<td>public void approval(String receiptSheetId, ReceiptSheetState state)
</tr>
<tr>
<td>前置条件
<td>收款单已被制定
</tr>
<tr>
<td>后置条件
<td>更改状态及银行账户，客户信息和银行账户余额
</tr>
<tr>
<td rowspan=3>ReceiptService.getSheetByState
<td>语法
<td>public List<ReceiptSheetVO> getSheetByState(ReceiptSheetState state)
</tr>
<tr>
<td>前置条件
<td>状态已输入
</tr>
<tr>
<td>后置条件
<td>返回所有该状态的收款单列表
</tr>
<tr>
<td rowspan=3>ReceiptService.getSheetById
<td>语法
<td>public ReceiptSheetVO getSheetById(String receiptSheetId)
</tr>
<tr>
<td>前置条件
<td>id已输入
</tr>
<tr>
<td>后置条件
<td>返回该id的收款单
</tr>
<tr>
<th colspan=3>需要的服务（需接口）
</tr>
<tr>
<th>服务名
<th colspan=2>服务
</tr>
<tr>
<td>receiptDao.getLatest()
<td colspan=2>获取最近的收款单持久化对象
</tr>
<tr>
<td>receiptDao.saveSheet(ReceiptSheetPO receiptSheetPO)
<td colspan=2>保存单一收款单持久化对象
</tr>
<tr>
<td>receiptDao.saveList(pContentPOList)
<td colspan=2>保存单一条目清单持久化对象
</tr>
<tr>
<td>receiptDao.findOneById(String receiptSheetId)
<td colspan=2>根据id找到对应的收款单持久化对象
</tr>
<tr>
<td>receiptDao.updateState(String receiptSheetId,ReceiptSheetState state)
<td colspan=2>持久化更新该id对应收款单的状态数据
</tr>
<tr>
<td>customerService.findCustomerById(Integer supplier)
<td colspan=2>根据id查找对应客户的持久化对象
</tr>
<tr>
<td>customerService.updateCustomer(CustomerPO customerPO)
<td colspan=2>更新用户的持久化数据对象
</tr>
<tr>
<td>receiptDao.findContentBySheetId(receiptSheetId)
<td colspan=2>根据收款单id查找对应条目清单
</tr>
<tr>
<td>accountService.findByNameExactly(String name)
<td colspan=2>根据名字查找对应的账户
</tr>
<tr>
<td>accountService.updateAccount(AccountVO accountVO)
<td colspan=2>更新账户余额
</tr>
<tr>
<td>receiptDao.findAll()
<td colspan=2>获取所有收款单持久化对象
</tr>
<tr>
<td>receiptDao.findAllByState(ReceiptSheetState state)
<td colspan=2>根据状态获取收款单持久化对象列表
</tr>
</table>



<center><font size=2><b>SalaryService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>SalaryService.makeSheet
<td>语法
<td>public void makeSheet(String employeeId, Date beginDate, Date endDate)
</tr>
<tr>
<td>前置条件
<td>员工在职且符合每日零点自动检测
</tr>
<tr>
<td>后置条件
<td>新建工资单持久化对象并保存
</tr>
<tr>
<td rowspan=3>SalaryService.approval
<td>语法
<td>public void approval(String salarySheetId, SalarySheetState state)
</tr>
<tr>
<td>前置条件
<td>工资单已被制定
</tr>
<tr>
<td>后置条件
<td>更改发放工资账户数据或重新生成新工资单
</tr>
<tr>
<td rowspan=3>SalaryService.getSheetByState
<td>语法
<td>public List<SalarySheetPO> getSheetByState(SalarySheetState state)
</tr>
<tr>
<td>前置条件
<td>状态已输入
</tr>
<tr>
<td>后置条件
<td>根据状态获取所有工资单持久化对象
</tr>
<tr>
<td rowspan=3>SalaryService.paySalary
<td>语法
<td>public void paySalary()
</tr>
<tr>
<td>前置条件
<td>每天零点自动触发
</tr>
<tr>
<td>后置条件
<td>如果是发薪日，则调用制作工资单
</tr>
<tr>
<th colspan=3>需要的服务（需接口）
</tr>
<tr>
<td>salaryDao.getLatest()
<td colspan=2>获取最新的工资单持久化对象
</tr>
<tr>
<td>clockInService.getAttendanceDays(Integer employeeId,Date beginDate, Date endDate)
<td colspan=2>获取对应员工出勤天数数据
</tr>
<tr>
<td>clockInService.getAbsenceDays(Integer employeeId,Date beginDate, Date endDate)
<td colspan=2>获取对应员工缺勤天数数据
</tr>
<tr>
<td>employeeDao.getEmployeeById(Integer employeeId)
<td colspan=2>根据id获取员工持久化对象数据
</tr>
<tr>
<td>employeeDao.findUserByEmployeeId(Integer employeeId)
<td colspan=2>根据id获取用户数据
</tr>
<tr>
<td>saleSheetDao.getTotalSaleAmount(String name,Date beginDate,Date endDate)
<td colspan=2>根据姓名获取对应时间段销售额
</tr>
<tr>
<td>salaryDao.getCommissionRate()
<td colspan=2>获取提成比率
</tr>
<tr>
<td>salaryDao.saveSheet(SalarySheetPO salarySheetPO)
<td colspan=2>保存工资单持久化对象
</tr>
<tr>
<td>salaryDao.findOneById(Integer salarySheetId)
<td colspan=2>根据id查询对应工资单持久化对象
</tr>
<tr>
<td>accountService.getSalaryPaymentAccount()
<td colspan=2>获取工资发放账户
</tr>
<tr>
<td>accountService.updateAccount(AccountVO)
<td colspan=2>更新工资发放账户
</tr>
<tr>
<td>salaryDao.findAll()
<td colspan=2>获取所有工资单持久化对象
</tr>
<tr>
<td>salaryDao.findAllByState(SalarySheetState state)
<td colspan=2>根据状态获取工资单持久化对象列表
</tr>
<tr>
<td>employeeService.getAllEmployee()
<td colspan=2>获取所有员工持久化对象
</tr>
</table>



<center><font size=2><b>BusinessService的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3 width="300px">BusinessService.showSaleDetails
<td>语法
<td>List<SaleDetailVO> showSaleDetails(String beginDateStr, String endDateStr)
</tr>
<tr>
<td>前置条件
<td>起止日期已输入且符合规范
</tr>
<tr>
<td>后置条件
<td>返回时间段内所有商品销售记录
</tr><tr>
<td rowspan=3>BusinessService.getProductSet
<td>语法
<td> Set<MyFilter>getProductSet(String beginDateStr, String endDateStr)
</tr><tr>
<td>前置条件
<td>起止时间已输入且符合规范，销售明细表已建立
</tr>
<tr>
<td>后置条件
<td>返回对应销售明细表中销售商品名的集合
</tr><tr>
<td rowspan=3>BusinessService.getSupplierSet
<td>语法
<td>Set<MyFilter> getSupplierSet(String beginDateStr, String endDateStr)
</tr>
<tr>
<td>前置条件
<td>起止时间已输入且符合规范，销售明细表已建立
</tr>
<tr>
<td>后置条件
<td>返回对应销售明细表中客户id集合
</tr>
<tr>
<td rowspan=3>BusinessService.getSalesmanSet
<td>语法
<td> Set<MyFilter>getSalesmanSet(String beginDateStr, String endDateStr)
</tr>
<tr>
<td>前置条件
<td>起止时间已输入且符合规范，销售明细表已建立
</tr>
<tr>
<td>后置条件
<td>返回对应销售明细表中销售员集合
</tr>
<tr>
<td rowspan=3>BusinessService.showBusinessProcess
<td>语法
<td> List<MyFilter> showBusinessProcess(String beginDateStr, String endDateStr)
</tr>
<tr>
<td>前置条件
<td>起止日期已输入且符合规范
</tr>
<tr>
<td>后置条件
<td>根据起止日期查询所有单据列表
</tr>
<tr>
<td rowspan=3>BusinessService.writeBack
<td>语法
<td>void writeBack(UserVO userVO, SheetVO sheetVO)
</tr>
<tr>
<td>前置条件
<td>被红冲单据存在
</tr>
<tr>
<td>后置条件
<td>红冲抵消该单据
</tr><tr>
<td rowspan=3>BusinessService.showBusinessSituation
<td>语法
<td>BusinessSituationTable showBusinessSituation(String beginDateStr, String endDateStr)
</tr><tr>
<td>前置条件
<td>起止日期已输入且符合规范
</tr><tr>
<td>后置条件
<td>根据起止日期查询收支利润数据
</tr>
<tr>
<td rowspan=3>BusinessService.createBook
<td>语法
<td>public void createBook()
</tr><tr>
<td>前置条件
<td>一个周期开始时
</tr><tr>
<td>后置条件
<td>单独储存套账，作为初始信息
</tr>
<tr>
<td rowspan=3>BusinessService.getBookById
<td>语法
<td>public BookVO getBookById(String bookId)
</tr><tr>
<td>前置条件
<td>bookId已输入
</tr><tr>
<td>后置条件
<td>查询对应的套账信息
</tr>
<tr>
<td rowspan=3>BusinessService.getAllBookId
<td>语法
<td>public List<String> getAllBookId()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>获取所有套账信息
</tr>
</table><table>
<th colspan=3>需要的接口（需接口）
</tr><tr>
<th>服务名
<th colspan=2>服务
</tr><tr>
<td>businessDao.getAllSaleDetails()
<td colspan=2>获取所有商品销售记录
</tr><tr>
<td>businessDao.getSaleDetails(Date beginDate,Date endDate)
<td colspan=2>根据时间段获取对应商品销售记录列表
</tr><tr>
<td>businessDao.getBusinessSituationItem(Date beginDate,Date endDate)
<td colspan=2>根据时间段获取每一项经营情况的数据列表
</tr><tr>
<td>businessDao.getAllBusinessSituationItem()
<td colspan=2>获取每一项经营情况的数据列表
</tr><tr>
<td>purchaseService.getPurchaseSheetByState(PurchaseSheetState state)
<td colspan=2>根据状态获取进货单列表
</tr><tr>
<td>purchaseReturnsService.getPurchaseReturnsSheetByState(PurchaseReturnsSheetState state)
<td colspan=2>根据状态获取进货退货单列表
</tr><tr>
<td>saleService.getSaleSheetByState(SaleSheetState state)
<td colspan=2>根据状态获取销售单列表
</tr><tr>
<td>saleReturnsService.getSaleReturnsSheetByState(SaleReturnsSheetState state)
<td colspan=2>根据状态获取销售退货单列表
</tr><tr>
<td>paymentService.getSheetByState(PaymentSheetState state)
<td colspan=2>根据状态获取付款单列表
</tr><tr>
<td>receiptService.getSheetByState(ReceiptSheetState state)
<td colspan=2>根据状态获取收款单列表
</tr><tr>
<td>salaryService.getSheetByState(SalarySheetState state)
<td colspan=2>根据状态获取工资单列表
</tr><tr>
<td>purchaseService.makePurchaseSheet(UserVO userVO,PurchaseSheetVO purchaseSheetVO)
<td colspan=2>制定（红冲）进货单
</tr><tr>
<td>purchaseSheetDao.getLatest()
<td colspan=2>获取最近的进货单
</tr><tr>
<td>purchaseService.approval(Integer sheetId, PurchaseSheetState state)
<td colspan=2>审批红冲进货单
</tr><tr>
<td>purchaseReturnsService.makePurchaseReturnsSheet(userVO, purchaseReturnsSheetVO)
<td colspan=2>制定（红冲）进货退货单
</tr><tr>
<td>purchaseReturnsSheetDao.getLatest()
<td colspan=2>获取最近的进货退货单
</tr><tr>
<td>purchaseReturnsService.approval(sheetId, PurchaseReturnsSheetState.SUCCESS)
<td colspan=2>审批红冲进货退货单
</tr><tr>
<td>saleService.makeSaleSheet(userVO, saleSheetVO)
<td colspan=2>制定（红冲）销售单
</tr><tr>
<td>saleSheetDao.getLatest()
<td colspan=2>获取最近的销售单
</tr><tr>
<td>saleService.approval(sheetId, SaleSheetState.SUCCESS)
<td colspan=2>审批红冲销售单
</tr><tr>
<td>saleReturnsService.makeSaleReturnsSheet(userVO, saleReturnsSheetVO)
<td colspan=2>制定（红冲）销售退货单
</tr><tr>
<td>saleReturnsSheetDao.getLatest()
<td colspan=2>获取最近的销售退货单
</tr><tr>
<td>saleReturnsService.approval(sheetId, SaleReturnsSheetState.SUCCESS)
<td colspan=2>审批红冲销售退货单
</tr><tr>
<td>paymentService.makeSheet(userVO, paymentSheetVO)
<td colspan=2>制定（红冲）付款单
</tr><tr>
<td>paymentDao.getLatest()
<td colspan=2>获取最近的付款单
</tr><tr>
<td>paymentService.approval(sheetId, PaymentSheetState.SUCCESS)
<td colspan=2>审批红冲付款单
</tr><tr>
<td>receiptService.makeSheet(userVO, receiptSheetVO)
<td colspan=2>制定（红冲）收款单
</tr><tr>
<td>receiptDao.getLatest()
<td colspan=2>获取最近的收款单
</tr><tr>
<td>receiptService.approval(sheetId, ReceiptSheetState.SUCCESS)
<td colspan=2>审批红冲收款单
</tr>
<tr>
<td>businessDao.getLatestBook()
<td colspan=2>获取最新的套账信息
</tr>
<tr>
<td>accountDao.findAll()
<td colspan=2>获取所有的账户信息
</tr>
<tr>
<td>customerDao.findAll()
<td colspan=2>获取所有的客户信息
</tr>
<tr>
<td>productDao.findAll()
<td colspan=2>获取所有的商品信息
</tr>
<tr>
<td>businessDao.saveBook(BookPO bookPO)
<td colspan=2>保存套账的持久化对象
</tr>
<tr>
<td>businessDao.saveAccountBook(AccountPOList accountPOList,String id)
<td colspan=2>保存套账账户的持久化信息
</tr>
<tr>
<td>businessDao.saveCustomerBook(CustomerPoList customerPOList,String id)
<td colspan=2>获取套账客户的持久化信息
</tr>
<tr>
<td>businessDao.saveProductBook(ProductPOList productPOList,String id)
<td colspan=2>获取套账商品的持久化信息
</tr>
<tr>
<td>businessDao.getAccountBookById(bookId)
<td colspan=2>根据套账id获取套账账户的持久化信息
</tr>
<tr>
<td>businessDao.getCustomerBookById(bookId)
<td colspan=2>根据套账id获取套账客户的持久化信息
</tr>
<tr>
<td>businessDao.getProductBookById(bookId)
<td colspan=2>根据套账id获取套账商品的持久化信息
</tr>
<tr>
<td>businessDao.getAllBookId()
<td colspan=2>获取所有套账id
</tr>
</table>




<center><font size=2><b>员工管理的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.induction</th>
        <th width="100px">语法</th>
        <td width="530px">
            void induction(EmployeeVO employeeVO);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>员工入职登记</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>员工的入职数据存入数据库</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.employeeQuit</th>
        <th>语法</th>
        <td>
            void employeeQuit(String id);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在员工ID对应员工账户</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>删除员工的账户</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.updateEmployee</th>
        <th>语法</th>
        <td>
            void updateEmployee(EmployeeVO employeeVO);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>员工信息更新</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>更新数据库中的相应员工属性</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.deleteEmployeeById</th>
        <th>语法</th>
        <td>
            void deleteEmployeeById(String id);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在员工ID对应的员工信息</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>删除员工信息</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.getEmployeeByRole</th>
        <th>语法</th>
        <td>
            List&lt;EmployeeVO&gt; getEmployeeByRole(Role role);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在传入参数对应岗位</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回对应岗位上所有员工的名单列表</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.getAllEmployee</th>
        <th>语法</th>
        <td>
            List&lt;EmployeeVO&gt; getAllEmployee();
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回所有员工的名单列表</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeService.getEmployeeByName</th>
        <th>语法</th>
        <td>
            EmployeeVO getEmployeeByName(String name);
        </td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在name对应员工</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回传入姓名对应的员工信息</td>
    </tr>
</table>
<table>
     <tr>
         <th colspan=2><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <th width="500px">服务名</th>
        <th>服务</th>
    </tr>
    <tr>
        <th>EmployeeDao.saveEmployee(EmployeePO employeePO)</th>
        <td>插入单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.saveEmployeeSalaryInfo(EmployeePO employeePO)</th>
        <td>插入单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.updateEmployee(EmployeePO employeePO)</th>
        <td>更新单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.updateEmployeeSalaryInfo(EmployeePO employeePO)</th>
        <td>更新单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.deleteEmployeeById(String id)</th>
        <td>删除单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.deleteEmployeeSalaryInfoById(String id)</th>
        <td>删除单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.getEmployeeById(String id)</th>
        <td>根据员工ID获取单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.getEmployeeByName(String Name)</th>
        <td>根据员工姓名获取单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.getEmployeeByRole(Role role)</th>
        <td>根据岗位查询多个持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.getAllEmployee()</th>
        <td>查询所有持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.getLatest()</th>
        <td>查询最近的一个持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.findUserByEmployeeId(String employeeId)</th>
        <td>根据员工ID查询账户单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.findEmployeeByUserId(Integer userId)</th>
        <td>根据员工账户ID查询员工单一持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.bind(String employeeId, Integer userId)</th>
        <td>根据员工ID和账户ID绑定两个持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.setPost(String employeeId, boolean onPost)</th>
        <td>根据员工ID和在岗状态，更新持久化对象</td>
    </tr>
    <tr>
        <th>EmployeeDao.isOnPost(String employeeId)</th>
        <td>根据员工ID查询员工是否在岗</td>
    </tr>
    <tr>
        <th>UserDao.findByUsername(String username)</th>
        <td>根据用户名查询用户对象</td>
    </tr>
    <tr>
        <th>SalaryDao.getPostSalary(Role role)</th>
        <td>根据岗位查询岗位对应薪资</td>
    </tr>

</table>


<center><font size=2><b>打卡系统的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">ClockInService.clockIn</th>
        <th width="300px">语法</th>
        <td width="530px">void clockIn(UserVO userVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在传入账户对应绑定的员工</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>若员工未打卡，进行打卡</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInService.makeDefaultRecordOnTime</th>
        <th>语法</th>
        <td>void makeDefaultRecordOnTime();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>时间为零点</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>所有员工生成默认打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.makeDefaultRecordOnStartup</th>
        <th>语法</th>
        <td>void makeDefaultRecordOnStartup();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>系统启动</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>若数据库中不存在当天默认打卡记录，则生成一个所有员工的默认打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getAllPersonalRecord</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; getAllPersonalRecord(UserVO userVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在用户信息对应绑定的员工信息</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回该用户的所有打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getPersonalRecordOnCurrentDay</th>
        <th>语法</th>
        <td>ClockInRecordPO getPersonalRecordOnCurrentDay(UserVO userVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在用户信息对应绑定的员工信息</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回该用户当天打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getPersonalRecordByDate</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; getPersonalRecordByDate(UserVO userVO, String beginDateStr, String endDateStr);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在用户信息对应绑定的员工信息</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回用户在指定时间段内的打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getAllRecord()</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; getAllRecord();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回全体员工打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getAllRecordOnCurrentDay</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; getAllRecordOnCurrentDay();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回全体员工当天打卡记录</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getAbsenceDays</th>
        <th>语法</th>
        <td>Integer getAbsenceDays(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在员工编号对应员工信息，且指定日期符合实际日期限制</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回员工在一段时间内的缺勤天数</td>
    </tr>
        <tr>
        <th rowspan = "3">ClockInService.getAttendanceDays</th>
        <th>语法</th>
        <td>Integer getAttendanceDays(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>存在员工编号对应员工信息，且指定日期符合实际日期限制</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回员工在一段时间内的出勤天数</td>
    </tr>
</table>
<table>
     <tr>
         <th colspan=2><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <th width="500px">服务名</th>
        <th>服务</th>
    </tr>
    <tr>
        <th>ClockInDao.clockIn(String employeeId, Date date)</th>
        <td>根据员工ID和日期查询并修改单一持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.makeRecord(ClockInRecordPO clockInRecordPO)</th>
        <td>插入单一持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.findAllRecordByEmployeeId(String employeeId)</th>
        <td>根据员工ID查询多个持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.findRecordByEmployeeIdByDate(String employeeId, Date date)</th>
        <td>根据员工ID和日期查询多个持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.findRecordByEmployeeIdByDateRange(String employeeId, Date beginDate, Date endDate)</th>
        <td>根据员工ID和起止日期查询多个持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.findAllRecord()</th>
        <td>查询所有员工打卡记录的持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.findRecordByDate(Date date)</th>
        <td>根据传入的日期查询多个持久化对象</td>
    </tr>
    <tr>
        <th>ClockInDao.getAbsenceDays(String employeeId, Date beginDate, Date endDate)</th>
        <td>根据员工ID和起止日期查询员工缺勤天数</td>
    </tr>
    <tr>
        <th>ClockInDao.getAttendanceDays(String employeeId, Date beginDate, Date endDate)</th>
        <td>根据员工ID和起止日期查询员工出勤天数</td>
    </tr>
    <tr>
        <th>EmployeeDao.findEmployeeByUserId(Integer userId)</th>
        <td>根据员工账户ID查询员工单一持久化对象</td>
    </tr>
    <tr>
        <th>UserDao.findByUsername(String username)</th>
        <td>根据用户名查询用户对象</td>
    </tr>
</table>



<center><font size=2><b>表：薪酬规则的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">SalaryComputeStrategy.compute</th>
        <th width="90px">语法</th>
        <td width="530px">SalaryInfo compute(SalaryComputeInfoNeeded info);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>info中计算薪资所需数据没有缺失</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回薪资信息</td>
    </tr>
    <tr>
        <th rowspan = "3">SalaryPaymentStrategy.isPayDay(</th>
        <th>语法</th>
        <td>boolean isPayDay();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>判断是否需要发放工资</td>
    </tr>
    <tr>
        <th rowspan = "3">SalaryPaymentStrategy.beginDate(/th>
        <th>语法</th>
        <td>Date beginDate();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回起始日期</td>
    </tr>
    <tr>
        <th rowspan = "3">SalaryPaymentStrategy.endDate</th>
        <th>语法</th>
        <td>Date endDate();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回截止日期</td>
    </tr>
</table>




<center><font size=2><b>表：制定促销策略的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">PromotionOfferStrategy.offer</th>
        <th width="100px">语法</th>
        <td width="530px">PromotionOfferInfo offer(PromotionVO promotionVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>需要制定促销策略提供的优惠</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回促销提供的优惠</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionRequireStrategy.satisfied</th>
        <th>语法</th>
        <td>boolean satisfied(PromotionVO promotionVO, SaleSheetVO saleSheetVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>销售单初步生成，需要检查有无符合条件的促销策略</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回对销售是否满足该促销条件的判断</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionService.createPromotion</th>
        <th>语法</th>
        <td>void createPromotion(PromotionVO promotionVO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>需要新增一个促销活动</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>创建新的促销策略</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionService.getPromotionById</th>
        <th>语法</th>
        <td>PromotionVO getPromotionById(String promotionId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>查询某条促销策略信息</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回对应促销策略的信息</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionService.getAllPromotion()</th>
        <th>语法</th>
        <td>List&lt;PromotionVO&gt; getAllPromotion();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>需要检查所有促销策略</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回所有促销策略的信息</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionService.getValidPromotion()</th>
        <th>语法</th>
        <td>List&lt;PromotionVO&gt; getValidPromotion();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>销售过程中检查符合条件的促销活动</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回所有有效的促销信息</td>
    </tr>
</table>
<table>
     <tr>
         <th colspan=2><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <th width="500px">服务名</th>
        <th>服务</th>
    </tr>
    <tr>
        <th>PromotionDao.savePromotion(PromotionPO promotionPO)</th>
        <td>插入单一持久化对象promotionPO</td>
    </tr>
    <tr>
        <th>PromotionDao.savePackages(List&lt;PromotionPackagePO&gt; promotionPackagePOList)</th>
        <td>插入多条商品要求包持久化对象PromotionPackagePO</td>
    </tr>
    <tr>
        <th>PromotionDao.saveGifts(List&lt;PromotionPackagePO&gt; promotionGiftPOList)</th>
        <td>插入多条赠品包持久化对象PromotionPackagePO</td>
    </tr>
    <tr>
        <th>PromotionDao.getLatest()</th>
        <td>查询最新制定的促销策略po</td>
    </tr>
    <tr>
        <th>PromotionDao.getAllPromotion()</th>
        <td>查询所有促销策略po</td>
    </tr>
    <tr>
        <th>PromotionDao.getPromotionById(String promotionId)</th>
        <td>根据ID，查询单一促销策略po</td>
    </tr>
    <tr>
        <th>PromotionDao.getPackagesByPromotionId(String promotionId)</th>
        <td>根据ID，查询多个促销策略商品要求包po</td>
    </tr>
    <tr>
        <th>PromotionDao.getGiftsByPromotionId(String promotionId)</th>
        <td>根据ID，查询多个促销策略赠品包</td>
    </tr>
</table>


<center><font size=2><b>表：制定年终奖的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">SalaryService.setFinalBonus</th>
        <th width="90px">语法</th>
        <td width="530px">public void setFinalBonus(String employeeId, BigDecimal finalBonus)</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>输入符合输入规则</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>为员工设置年终奖</td>
    </tr>
        <tr>
        <th rowspan = "3">SalaryService.getFinalBonusList</th>
        <th width="90px">语法</th>
        <td width="530px">public List&lt;FinalBonusVO&gt; getFinalBonusList()</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>获取每个（不是GM的）员工的1月到11月的（应发）薪水总和</td>
    </tr>
</table>
<table>
     <tr>
         <th colspan=2><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <th width="500px">服务名</th>
        <th>服务</th>
    </tr>
    <tr>
        <th>SalaryDao.getFinalBonus(String employeeId)</th>
        <td>根据ID，获取员工年终奖金额</td>
    </tr>
    <tr>
        <th>SalaryDao.setFinalBonus(String employeeId, BigDecimal finalBonus)</th>
        <td>更新员工年终奖信息</td>
    </tr>
    <tr>
        <th>SalaryDao.computeSalarySum(String employeeId, Date beginDate, Date endDate)</th>
        <td>根据ID，查询指定日期内的薪资并计算返回总和</td>
    </tr>
</table>



#### 5.4 数据层的分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。EmployeeService业务逻辑需要的服务由EmployeeDao接口提供，
本系统中持久化数据以数据库形式保存，数据层模块的描述具体如图所示。



##### 5.4.1 数据层模块的职责

数据层模块的职责如表所示

| 模块         | 职责                                                         |
| ------------ | ------------------------------------------------------------ |
| UserDao      | 持久化数据库接口，提供用户登录，注册，查询，删除服务         |
| AccountDao   | 持久化数据库接口，提供账户增，删，改，查服务                 |
| PaymentDao   | 持久化数据库接口，提供新建，更新，查询付款单服务             |
| ReceiptDao   | 持久化数据库接口，提供新建，更新，查询收款单服务             |
| SalaryDao    | 持久化数据库接口，提供新建，更新，查询工资单及查询工资服务   |
| BusinessDao  | 持久化数据库接口，提供查询销售明细表，经营历程表，经营情况表服务 |
| EmployeeDao  | 持久化数据库接口，提供员工基本信息、薪资信息与员工本身的增，删，改，查服务 |
| ClockInDao   | 持久化数据库接口，提供员工打卡记录的新建，更新，查询服务     |
| PromotionDao | 持久化数据库接口，提供促销策略的增加、修改、查询服务         |



##### 5.4.2 数据层模块的接口规范

数据层模块的接口规范如下列各表所示

<center><font size=2><b>UserDao的接口规范</center>

<table>
<tr>
<th colspan=3>提供的服务（供接口）
</tr>
<tr>
<td rowspan=3>UserDao.createUser(User user)
<td>语法
<td>int createUser(User user)
</tr>
<tr>
<td>前置条件
<td>同样id的user不存在
</tr>
<tr>
<td>后置条件
<td>在数据库中新建一个userPO
</tr><tr>
<td rowspan=3>UserDao.findByUserName
<td>语法
<td> User findByUsername(String username);
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据name查找返回对应的用户
</tr><tr>
<td rowspan=3>UserDao.findByUsernameAndPassword
<td>语法
<td> User findByUsernameAndPassword(String username, String password)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据用户名和密码查找是否存在该用户且密码匹配，返回该用户
</tr><tr>
<td rowspan=3>UserDao.deleteUserById
<td>语法
<td>void deleteUserById(Integer id)
</tr><tr>
<td>前置条件
<td>该id对应的user在数据库中存在
</tr><tr>
<td>后置条件
<td>从数据库中删除该user
</tr>
</table>



<center><font size=2><b>AccountDao的接口规范</b></font></center>

<table>
<tr>
<th colspan=3>提供的接口（供接口）
</tr>
<tr>
<td rowspan=3>AccountDao.createAccount
<td>语法
<td>int createAccount(AccountPO accountPO)
</tr>
<tr>
<td>前置条件
<td>数据库中无相同账户
</tr>
<tr>
<td>后置条件
<td>在数据库中新建一个账户
</tr><tr>
<td rowspan=3>AccountDao.deleteById
<td>语法
<td>int deleteById(Integer id)
</tr><tr>
<td>前置条件
<td>该id对应的账户存在
</tr><tr>
<td>后置条件
<td>在数据库中删除该id对应的账户
</tr><tr>
<td rowspan=3>AccountDao.update
<td>语法
<td>int update(AccountPO accountPO)
</tr><tr>
<td>前置条件
<td>数据库中存在该账户
</tr><tr>
<td>后置条件
<td>在数据库中更新该账户
</tr><tr>
<td rowspan=3>AccountDao.findByName
<td>语法
<td>List<AccountPO> findByName(String name)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据name关键词在数据库中查找返回对应的AccountPO列表
</tr><tr>
<td rowspan=3>AccountDao.findByNameExactly
<td>语法
<td>AccountPO findByNameExactly(String name)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据精确name在数据库中查找返回对应的AccountPO
</tr><tr>
<td rowspan=3>AccountDao.findById
<td>语法
<td>AccountPO findById(Integer id)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据id在数据库中查找返回对应的AccountPO
</tr><tr>
<td rowspan=3>AccountDao.findAll
<td>语法
<td>List<AccountPO> findAll()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>返回数据库中所有AccountPO
</tr>
</table>



<center><font size=2><b>PaymentDao的接口规范</center>

<table>
<tr>
<th colspan=3>提供的接口（供接口）
</tr><tr>
<td rowspan=3>PaymentDao.saveSheet
<td>语法
<td>int saveSheet(PaymentSheetPO paymentSheetPO)
</tr><tr>
<td>前置条件
<td>数据库中无相同付款单
</tr><tr>
<td>后置条件
<td>在数据库中保存该paymentSheetPO
</tr><tr>
<td rowspan=3>PaymentDao.saveList
<td>语法
<td>int saveList(List<PaymentSheetContentPO> paymentSheetContent)
</tr><tr>
<td>前置条件
<td>数据库中无相同转账列表
</tr><tr>
<td>后置条件
<td>在数据库中保存在转账列表
</tr><tr>
<td rowspan=3>PaymentDao.updateState
<td>语法
<td>int updateState(String paymentSheetId, PaymentSheetState state)
</tr><tr>
<td>前置条件
<td>该付款单id在数据库中存在
</tr><tr>
<td>后置条件
<td>在数据库中更新该付款单状态
</tr><tr>
<td rowspan=3>PaymentDao.getLatest
<td>语法
<td>PaymentSheetPO getLatest()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>在数据库中查找返回最近的付款单
</tr><tr>
<td rowspan=3>PaymentDao.findAll
<td>语法
<td>List<PaymentSheetPO> findAll()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>返回所有数据库中的付款单
</tr><tr>
<td rowspan=3>PaymentDao.findAllByState
<td>语法
<td>List<PaymentSheetPO> findAllByState(PaymentSheetState paymentSheetState)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>在数据库中查找返回所有该状态的付款单
</tr><tr>
<td rowspan=3>PaymentDao.findOneById
<td>语法
<td>PaymentSheetPO findOneById(String paymentSheetId)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据id查找数据库返回对应付款单
</tr><tr>
<td rowspan=3>PaymentDao.findContentBySheetId
<td>语法
<td>List<PaymentSheetContentPO> findContentBySheetId(String paymentSheetId)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据付款单编号返回对应的转账列表
</tr>
</table>



<center><font size=2><b>ReceiptDao的接口规范</center>

<table>
<tr>
<th colspan=3>提供的接口（供接口）
</tr><tr>
    <td rowspan=3>ReceiptDao.saveSheet
<td>语法
<td>int saveSheet(ReceiptSheetPO receiptSheetPO)
</tr><tr>
<td>前置条件
<td>数据库中无相同收款单
</tr><tr>
<td>后置条件
<td>在数据库中保存该receiptSheetPO
</tr><tr>
<td rowspan=3>ReceiptDao.saveList
<td>语法
<td>int saveList(List<ReceiptSheetContentPO> receiptSheetContent)
</tr><tr>
<td>前置条件
<td>数据库中无相同条目清单
</tr><tr>
<td>后置条件
<td>在数据库中保存在条目清单
</tr><tr>
<td rowspan=3>ReceiptDao.updateState
<td>语法
<td>int updateState(String receiptSheetId, ReceiptSheetState state)
</tr><tr>
<td>前置条件
<td>该收款单id在数据库中存在
</tr><tr>
<td>后置条件
<td>在数据库中更新该收款单状态
</tr><tr>
<td rowspan=3>ReceiptDao.getLatest
<td>语法
<td>ReceiptSheetPO getLatest()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>在数据库中查找返回最近的收款单
</tr><tr>
<td rowspan=3>ReceiptDao.findAll
<td>语法
<td>List<ReceiptSheetPO> findAll()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>返回所有数据库中的收款单
</tr><tr>
<td rowspan=3>ReceiptDao.findAllByState
<td>语法
<td>List<ReceiptSheetPO> findAllByState(ReceiptSheetState receiptSheetState)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>在数据库中查找返回所有该状态的收款单
</tr><tr>
<td rowspan=3>ReceiptDao.findOneById
<td>语法
<td>ReceiptSheetPO findOneById(String receiptSheetId)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据id查找数据库返回对应收款单
</tr><tr>
<td rowspan=3>ReceiptDao.findContentBySheetId
<td>语法
<td>List<ReceiptSheetContentPO> findContentBySheetId(String receiptSheetId)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据收款单编号返回对应的条目清单
</tr>
</table>



<center><font size=2><b>SalaryDao的接口规范</center>

<table>
<tr>
<th colspan=3>提供的接口（供接口）
</tr>
<tr>
<td rowspan=3>SalaryDao.saveSheet
<td>语法
<td>int saveSheet(SalarySheetPO salarySheetPO)
</tr>
<tr>
<td>前置条件
<td>数据库中无相同工资单
</tr>
<tr>
<td>后置条件
<td>在数据库中新建该工资单
</tr><tr>
<td rowspan=3>SalaryDao.updateState
<td>语法
<td>int updateState(String salarySheetId, SalarySheetState state)
</tr><tr>
<td>前置条件
<td>该工资单在数据库中存在
</tr><tr>
<td>后置条件
<td>根据id更新数据库中对应工资单的状态
</tr><tr>
<td rowspan=3>SalaryDao.getLatest
<td>语法
<td>SalarySheetPO getLatest()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>在数据库查找返回最近的工资单
</tr><tr>
<td rowspan=3>SalaryDao.findAll
<td>语法
<td>List<SalarySheetPO> findAll()
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>返回数据库中所有工资单
</tr><tr>
<td rowspan=3>SalaryDao.findAllByState
<td>语法
<td>List<SalarySheetPO> findAllByState(SalarySheetState state)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据状态返回对应的所有工资单
</tr><tr>
<td rowspan=3>SalaryDao.findOneById
<td>语法
<td>SalarySheetPO findOneById(String salarySheetId) 
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据id查找返回对应的工资单
</tr><tr>
<td rowspan=3>SalaryDao.getPostSalary
<td>语法
<td>BigDecimal getPostSalary(Role role)
</tr><tr>
<td>前置条件
<td>该岗位存在
</tr><tr>
<td>后置条件
<td>根据岗位查找返回岗位工资
</tr><tr>
<td rowspan=3>SalaryDao.getCommissionRate
<td>语法
<td>BigDecimal getCommissionRate()
</tr><tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>返回提成比例
</tr>
</table>



<center><font size=2><b>BusinessDao的接口规范</b></font></center>

<table>
<tr>
<th colspan=3>提供的接口（供接口）
</tr>
<tr>
<td rowspan=3>BusinessDao.getSaleDetails
<td>语法
<td>List<SaleDetailVO> getSaleDetails(Date beginDate, Date endDate)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>根据时间段查找数据库返回所有销售明细
</tr><tr>
<td rowspan=3>BusinessDao.getAllSaleDetails
<td>语法
<td>List<SaleDetailVO> getAllSaleDetails()  
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>返回数据库中所有销售明细
</tr><tr>
<td rowspan=3>BusinessDao.getBusinessSitustionItem
<td>语法
<td>List<BusinessSituationItem> getBusinessSituationItem(Date beginDate, Date endDate)
</tr><tr>
<td>前置条件
<td>无
</tr><tr>
<td>后置条件
<td>根据时间段在数据库中查找返回所有经营情况信息
</tr><tr>
<td rowspan=3>BusinessDao.getAllBusinessSituationItem
<td>语法
<td>List<BusinessSituationItem> getAllBusinessSituationItem()
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>返回所有经营情况信息
</tr>

<tr>
<td rowspan=3>BusinessDao.getLatestBook
<td>语法
<td>BookPO getLatestBook()
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>返回最新的套账持久化对象
</tr>

<tr>
<td rowspan=3>BusinessDao.saveBook
<td>语法
<td>int saveBook(BookPO bookPO)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>在数据库中保存套账持久化对象
</tr>

<tr>
<td rowspan=3>BusinessDao.saveAccountBook
<td>语法
<td>int saveAccountBook(@Param("list") List<AccountPO> accountPOList, String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>在数据库中存入账户分套账持久化对象
</tr>

<tr>
<td rowspan=3>BusinessDao.saveCustomerBook
<td>语法
<td>int saveCustomerBook(@Param("list") List<CustomerPO> customerPOList, String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>在数据库中存入客户分套账持久化对象
</tr>

<tr>
<td rowspan=3>BusinessDao.saveProductBook
<td>语法
<td>int saveProductBook(@Param("list") List<ProductPO> productPOList, String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>在数据库中存入商品分套账持久化对象
</tr>

<tr>
<td rowspan=3>BusinessDao.getBookbyId
<td>语法
<td>BookPO getBookById(String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>根据id在数据库中查找返回对应套账
</tr>

<tr>
<td rowspan=3>BusinessDao.getAccountBookById
<td>语法
<tdList<AccountPO> getAccountBookById(String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>根据id在数据库中查找返回对应账户分套账
</tr>

<tr>
<td rowspan=3>List<CustomerPO>BusinessDao.getCustomerBookById
<td>语法
<td>List<CustomerPO> getCustomerBookById(String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>根据id在数据库中查找返回对应客户分套账
</tr>

<tr>
<td rowspan=3>BusinessDao.getProductBookById
<td>语法
<td>List<ProductPO> getProductBookById(String bookId)
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>根据id在数据库中查找返回对应商品分套账
</tr>

<tr>
<td rowspan=3>BusinessDao.getAllBookId
<td>语法
<td>List<String> getAllBookId()
</tr>
<tr>
<td>前置条件
<td>无
</tr>
<tr>
<td>后置条件
<td>返回数据库中所有套账id
</tr>
</table>



<center><font size=2><b>员工管理的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.saveEmployee</th>
        <th width="150px">语法</th>
        <td width="530px">int saveEmployee(EmployeePO employeePO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>同样ID的po在数据库员工基本信息表中不存在</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>在数据库中增加一个员工基本信息的po记录</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.saveEmployeeSalaryInfo</th>
        <th>语法</th>
        <td>int saveEmployeeSalaryInfo(EmployeePO employeePO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>同样ID的po在数据库员工薪资信息表中不存在</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>在数据库中增加一个员工薪资信息的po记录</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.updateEmployee</th>
        <th>语法</th>
        <td>int updateEmployee(EmployeePO employeePO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>更新一个员工基本信息的po</td>
    </tr>
 	    <tr>
        <th rowspan = "3">EmployeeDao.updateEmployeeSalaryInfo</th>
        <th>语法</th>
        <td>int updateEmployeeSalaryInfo(EmployeePO employeePO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>更新一个员工薪资信息的po</td>
    </tr>
        <tr>
        <th rowspan = "3">EmployeeDao.deleteEmployeeById</th>
        <th>语法</th>
        <td>void deleteEmployeeById(String id);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库员工基本信息表中存在相同ID的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>删除一个员工基本信息的po</td>
    </tr>
        <tr>
        <th rowspan = "3">EmployeeDao.deleteEmployeeSalaryInfoById</th>
        <th>语法</th>
        <td>void deleteEmployeeSalaryInfoById(String id);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库员工薪资信息表中存在相同ID的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>删除一个员工薪资信息的po</td>
    </tr>
        <tr>
        <th rowspan = "3">EmployeeDao.getEmployeeById</th>
        <th>语法</th>
        <td>EmployeePO getEmployeeById(String id);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的员工信息po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据ID进行查找，返回相应的EmployeePO结果</td>
    </tr>
        <tr>
        <th rowspan = "3">EmployeeDao.getEmployeeByName</th>
        <th>语法</th>
        <td>EmployeePO getEmployeeByName(String Name);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同Name的员工信息po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据Name进行查找，返回相应的EmoloyeePO结果</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.getEmployeeByRole</th>
        <th>语法</th>
        <td>List&lt;EmployeePO&gt; getEmployeeByRole(Role role);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在role相应的岗位po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据role进行查找，返回所有符合查询条件的EmployeePO</td>
    </tr>
        <tr>
        <th rowspan = "3">EmployeeDao.getAllEmployee</th>
        <th>语法</th>
        <td>List&lt;EmployeePO&gt; getAllEmployee();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回所有EmployeePO结果</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.getLatest</th>
        <th>语法</th>
        <td>EmployeePO getLatest();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在员工信息的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回最新一条EmployeePO结果</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.findUserByEmployeeId</th>
        <th>语法</th>
        <td>User findUserByEmployeeId(String employeeId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应UserPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据employeeId进行查询，返回对应的UserPO结果</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.findEmployeeByUserId</th>
        <th>语法</th>
        <td>EmployeePO findEmployeeByUserId(Integer userId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在userId对应EmployeePO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据userId进行查询，返回对应的EmployeePO结果</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.bind</th>
        <th>语法</th>
        <td>void bind(String employeeId, Integer userId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在两个ID分别对应的po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>两个ID分别对应的EmployeePO与UserPO绑定</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.setPost</th>
        <th>语法</th>
        <td>int setPost(String employeeId, boolean onPost);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在ID对应EmployeePO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据ID进行更新，更新ID对应EmoloyeePO在岗状态</td>
    </tr>
    <tr>
        <th rowspan = "3">EmployeeDao.isOnPost</th>
        <th>语法</th>
        <td>boolean isOnPost(String employeeId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在ID对应EmployeePO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据ID进行查询，查询ID对应EmoloyeePO的在岗状态</td>
    </tr>
</table>



<center><font size=2><b>打卡系统的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.clockIn</th>
        <th width="300px">语法</th>
        <td width="530px">int clockIn(String employeeId, Date date);</td>
    </tr>
    <tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应ClockInRecordPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据employeeId，更新数据库中对应打卡记录po</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.makeRecord</th>
        <th>语法</th>
        <td>int makeRecord(ClockInRecordPO clockInRecordPO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中不存在相同ID的ClockInRecordPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>插入一条ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.findAllRecordByEmployeeId</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; findAllRecordByEmployeeId(String employeeId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应的ClockInRecordPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据employeeId，返回所有ID相等的ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.findRecordByEmployeeIdByDate</th>
        <th>语法</th>
        <td>ClockInRecordPO findRecordByEmployeeIdByDate(String employeeId, Date date);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应的ClockInRecordPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据employeeId与date，返回符合条件的ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.findRecordByEmployeeIdByDateRange</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; findRecordByEmployeeIdByDateRange(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应的ClockInRecordPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据employeeId与指定时间段，返回所有符合条件的ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.findAllRecord</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; findAllRecord();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>返回数据库中所有ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.findRecordByDate</th>
        <th>语法</th>
        <td>List&lt;ClockInRecordPO&gt; findRecordByDate(Date date);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据date进行查询，返回所有符合条件的ClockInRecordPO</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.getAbsenceDays</th>
        <th>语法</th>
        <td>Integer getAbsenceDays(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应的ClockInRecordPO，指定日期时间段符合实际时间限制</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据员工ID与指定日期，返回员工缺席天数</td>
    </tr>
    <tr>
        <th rowspan = "3">ClockInDao.getAttendanceDays</th>
        <th>语法</th>
        <td>Integer getAttendanceDays(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在employeeId对应的ClockInRecordPO，指定日期时间段符合实际时间限制</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据员工ID与指定日期，返回员工出席天数</td>
    </tr>
</table>



<center><font size=2><b>制定促销策略的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">PromotionDao.savePromotion</th>
        <th width="120px">语法</th>
        <td width="530px">int savePromotion(PromotionPO promotionPO);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>在数据库中不存在同样ID的PromotionPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>在数据库中新增一个PromotionPO</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionDao.savePackages</th>
        <th>语法</th>
        <td>int savePackages(List&lt;PromotionPackagePO&gt; promotionPackagePOList);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>在数据库中不存在同样ID的商品要求包po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>在数据库中新增一个商品要求包po</td>
    </tr>
        <tr>
        <th rowspan = "3">PromotionDao.saveGifts</th>
        <th>语法</th>
        <td>int saveGifts(List&lt;PromotionPackagePO&gt; promotionGiftPOList);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>在数据库中不存在同样ID的赠品包po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>在数据库中新增一个赠品包po</td>
    </tr>
        <tr>
        <th rowspan = "3">PromotionDao.getLatest</th>
        <th>语法</th>
        <td>PromotionPO getLatest();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在PromotionPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>查询获取最新的PromotionPO</td>
    </tr>
        <tr>
        <th rowspan = "3">PromotionDao.getAllPromotion</th>
        <th>语法</th>
        <td>List&lt;PromotionPO&gt; getAllPromotion();</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>无</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>查询获取所有PromotionPO</td>
    </tr>
        <tr>
        <th rowspan = "3">PromotionDao.getPromotionById</th>
        <th>语法</th>
        <td>PromotionPO getPromotionById(String promotionId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在同样ID的PromotionPO</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>查询获取ID对应的PromotionPO</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionDao.getPackagesByPromotionId</th>
        <th>语法</th>
        <td>List&lt;PromotionPackagePO&gt; getPackagesByPromotionId(String promotionId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在同样ID的商品要求包po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>查询获取ID对应的商品要求包po</td>
    </tr>
    <tr>
        <th rowspan = "3">PromotionDao.getGiftsByPromotionId</th>
        <th>语法</th>
        <td>List&lt;PromotionPackagePO&gt; getGiftsByPromotionId(String promotionId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在同样ID的赠品包po</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>查询获取ID对应的赠品包po</td>
    </tr>
</table>


<center><font size=2><b>制定年终奖的接口规范</b></font></center>

<table>
    <tr>
        <th colspan = "3"><center>提供的服务（供接口）</center></th>
    </tr>
    <tr>
        <th rowspan = "3">SalaryDao.getFinalBonus</th>
        <th width="90px">语法</th>
        <td width="530px">BigDecimal getFinalBonus(String employeeId);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的员工</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据ID，获取员工年终奖金额</td>
    </tr>
    <tr>
        <th rowspan = "3">SalaryDao.setFinalBonus</th>
        <th>语法</th>
        <td>int setFinalBonus(String employeeId, BigDecimal finalBonus);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的员工</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>更新员工年终奖信息</td>
    </tr>
    <tr>
        <th rowspan = "3">SalaryDao.computeSalarySum</th>
        <th>语法</th>
        <td>BigDecimal computeSalarySum(String employeeId, Date beginDate, Date endDate);</td>
    </tr>
 	<tr>
        <th>前置条件</th>
        <td>数据库中存在相同ID的员工</td>
    </tr>
    <tr>
        <th>后置条件</th>
        <td>根据ID，查询指定日期内的薪资并计算返回总和</td>
    </tr>
</table>




### 6. 信息视角

#### 6.1 数据持久化对象

* AccoutPO包含账户id，账户名称，账户余额
* UserPO包含用户ID，姓名，密码，身份
* PaymentSheetPO包含单据编号，客户，操作员，付款总额，备注，单据状态，创建时间
* PaymentSheetContentPO包含id，关联的收款单id，转账账户，转账金额，备注
* ReceiptSheetPO包含单据编号，客户，操作员，收款总额，备注，单据状态，创建时间
* ReceiptSheetContentPO包含id，关联的付款单id，转账账户，转账金额，备注
* SalarySheetPO包含单据编号，工资计算起始日期，工资计算截至日期，单据创建日期，员工编号，员工姓名，员工银行账户，出勤天数，缺勤天数，基本工资，岗位工资，提成工资，应扣工资，应发工资，扣除个人所得税，扣除失业保险，扣除住房公积金，应扣税款总计，实发工资，单据状态
* EmployeePO包含员工编号，姓名，性别，出生日期，电话号码，工作岗位，基本工资，岗位工资，薪资计算方式，薪资发放方式，工资卡账户
* ClockInRecordPO包含打卡记录编号，打卡员工编号，日期，打卡时间，当日是否打卡
* PromotionPO包含促销策略编号，活动开始时间，活动结束时间，促销适用客户的最低级别，促销需求的最低总价，促销提供的折扣，促销提供的代金券
* PromotionPackagePO包含促销包编号，关联的促销编号，商品编号，数量
* PromotionGiftPO包含赠品包编号，关联的促销编号，商品编号，数量

#### 6.2 数据库表

数据库中包含：

- category
- customer
- product
- purchase_sheet
- purchase_sheet_content
- purchase_returns_sheet
- purchase_returns_sheet_content
- sale_sheet
- sale_sheet_content
- sale_returns_sheet
- sale_returns_sheet_content
- warehouse
- warehouse_input_sheet
- warehouse_input_sheet_content
- warehouse_output_sheet
- warehouse_output_sheet_content
- account，receipt_sheet
- receipt_sheet_content
- payment_sheet
- payment_sheet_content
- employee
- employee_salary_info
- employee_post_info
- employee_user
- clock_in_record
- salary_sheet
- post_salary_info
- commission_rate_info
- promotion
- promotion_package
- promotion_gift
- book
- account_book
- customer_book
- product_book
- user
- employee_year_end_bonus_info
